<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>

<meta charset="utf-8" >

<title>paper-reading | MapReduce</title>
<meta name="keywords" content="paper-reading | MapReduce, Tappan">
<meta name="description" content="Simplified Data Processing on Large Clusters">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" href="/style/main.css">


<link rel="stylesheet" href="/style/jquery.fancybox.min.css">




    <link rel="stylesheet" href="/style/prism.css"/>




  <meta name="generator" content="Hexo 5.4.2"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="http://trea19.github.io">
        <img class="avatar" src="/images/avatar.png" alt="" width="32px" height="32px">
      </a>
      <a href="http://trea19.github.io">
        <h1 class="site-title">Tappan</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/" class="menu purple-link">
        Home
      </a>
    
  
    
      <a href="/tags" class="menu purple-link">
        Tags
      </a>
    
  
    
      <a href="/about" class="menu purple-link">
        About Me
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">paper-reading | MapReduce</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2023-02-15</span>
        
          <span>
          <i class="icon icon-pricetags-outline"></i>
            
              <a href="/tags/Distributed-Systems/">
              Distributed Systems
                
                  ï¼Œ
                
              </a>
            
              <a href="/tags/paper-reading/">
              paper-reading
                
                  ï¼Œ
                
              </a>
            
              <a href="/tags/MapReduce/">
              MapReduce
                
              </a>
            
          </span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <h2><span id="get-started">Get started</span></h2><p>resource: <a target="_blank" rel="noopener" href="https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf"><strong>MapReduce: Simplified Data Processing on Large Clusters</strong> (2004)</a></p>
<p>ref: <a target="_blank" rel="noopener" href="http://ccr.sigcomm.org/online/files/p83-keshavA.pdf">How to read one paper</a></p>
<p>The first pass: a quick scan to get a birdâ€™s-eye view of the paper. (5-10min)</p>
<ol>
<li><p>Carefully read the title, abstract, and introduction </p>
</li>
<li><p>Read the section and sub-section headings, but ignore everything else </p>
</li>
<li><p>Read the conclusions</p>
</li>
<li><p>Glance over the references, mentally ticking off the ones youâ€™ve already read</p>
</li>
</ol>
<p>The second pass: greater care, bur ignore details such as proof. (1h)</p>
<ol>
<li>Look carefully at the figures, diagrams and other illustrations in the paper. Pay special attention to graphs. </li>
<li>Remember to mark relevant unread references for further reading (this is a good way to learn more about the background of the paper).</li>
</ol>
<p>The third pass: attempt to virtually re-implement the paper. (4/5 hours for beginners, 1hour for experienced readers)</p>
<ol>
<li>Identify and challenge every assumption in every statement</li>
<li>Think about how you yourself would present a particular idea</li>
</ol>
<h2><span id="overview">Overview</span></h2><p>context: multi-hour computations on multi-terabyte data-sets</p>
<blockquote>
<p>e.g. build search index, or sort, or analyze structure of web<br>       only practical with 1000s of computers<br>       applications not written by distributed systems experts</p>
</blockquote>
<p>big goal: easy for non-specialist programmers</p>
<blockquote>
<p>programmer just defines Map and Reduce functions<br>often fairly simple sequential code</p>
</blockquote>
<p>MR manages, and hides, all aspects of distribution!</p>
<p><img src="/images/mapreduce.png" alt="Execution Overview"></p>
<ol>
<li><p>ç”¨æˆ·ç¨‹åºä¸­çš„ MapReduce åº“é¦–å…ˆå°†è¾“å…¥æ–‡ä»¶åˆ‡åˆ†ä¸ºMå—ï¼Œæ¯å—çš„å¤§å°ä¸€èˆ¬ä¸º16MB-64MBï¼Œç„¶å MapReduce åº“ä¼šåœ¨ä¸€ä¸ªé›†ç¾¤çš„è‹¥å¹²å°æœºå™¨ä¸Šå¯åŠ¨ç¨‹åºçš„å¤šä¸ªå‰¯æœ¬ï¼›</p>
</li>
<li><p>ç¨‹åºçš„å„ä¸ªå‰¯æœ¬ä¸­æœ‰ä¸€ä¸ª master ï¼Œå…¶å®ƒçš„æ˜¯ worker ã€‚ä¸»èŠ‚ç‚¹å°† M ä¸ª map ä»»åŠ¡å’Œ R ä¸ª reduce ä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„ workerï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€é¡¹ä»»åŠ¡ï¼›</p>
</li>
<li><p>è¢«åˆ†é… map ä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹è¯»å–å¯¹åº”çš„ input fileï¼Œä»ä¸­è§£æå‡º key/value pairsï¼Œç„¶åå°†æ¯ä¸ªpair ä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„ map å‡½æ•°ã€‚ç”± map å‡½æ•°äº§ç”Ÿçš„ä¸­é—´ key/value pairs éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼›</p>
</li>
<li><p>ç¼“å­˜çš„æ•°æ®å¯¹ä¼šè¢«å‘¨æœŸæ€§çš„ç”±åˆ’åˆ†å‡½æ•°åˆ†æˆ R å—ï¼Œå¹¶å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ã€‚è¿™äº›ç¼“å­˜å¯¹åœ¨æœ¬åœ°ç£ç›˜ä¸­çš„ä½ç½®ä¼šè¢«ä¼ å›ç»™ masterï¼Œmaster è´Ÿè´£å°†è¿™äº›ä½ç½®å†ä¼ ç»™ reduce èŠ‚ç‚¹ï¼›</p>
</li>
<li><p>å½“ä¸€ä¸ª reduce èŠ‚ç‚¹å¾—åˆ° masterçš„ä½ç½®é€šçŸ¥åï¼Œå®ƒä½¿ç”¨ RPC è°ƒç”¨å»è¯» map èŠ‚ç‚¹çš„æœ¬åœ°ç£ç›˜ä¸­çš„ç¼“å­˜æ•°æ®ã€‚å½“ reduce èŠ‚ç‚¹è¯»å–å®Œäº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®ï¼Œå®ƒä¼šå°†è¿™äº›æ•°æ®æŒ‰ä¸­é—´ key æ’åºï¼Œè¿™æ ·ç›¸åŒ key çš„æ•°æ®å°±è¢«æ’åˆ—åœ¨ä¸€èµ·ã€‚å¦‚æœä¸­é—´æ•°æ®æ•°é‡è¿‡å¤šï¼Œä¸èƒ½å…¨éƒ¨è½½å…¥å†…å­˜ï¼Œåˆ™ä¼šä½¿ç”¨å¤–éƒ¨æ’åº ï¼ˆshuffleï¼‰ï¼›</p>
</li>
<li><p>reduce èŠ‚ç‚¹éå†æ’åºå¥½çš„ä¸­é—´æ•°æ®ï¼Œå¹¶å°†é‡åˆ°çš„æ¯ä¸ªä¸­é—´ key å’Œä¸å®ƒå…³è”çš„ä¸€ç»„ä¸­é—´ value ä¼ é€’ç»™ç”¨æˆ·çš„reduce å‡½æ•°ï¼Œreduce å°†æ•°æ®å¯¹åº”çš„ key åˆå¹¶åè¿”å›æœ€ç»ˆæ•°æ®ï¼›</p>
</li>
<li><p>å½“æ‰€æœ‰çš„ map å’Œ reduce ä»»åŠ¡éƒ½å®Œæˆåï¼Œä¸»èŠ‚ç‚¹å”¤é†’ç”¨æˆ·ç¨‹åºï¼Œæ­¤æ—¶ç”¨æˆ·ç¨‹åºä¸­çš„ MapReduce è°ƒç”¨è¿”å›åˆ°ç”¨æˆ·ä»£ç ä¸­ã€‚</p>
</li>
</ol>
<h2><span id="abstract-view">Abstract view</span></h2><p>abstract view of a MapReduce job â€“ word count</p>
<pre class="line-numbers language-none"><code class="language-none">Input1 -&gt; Map -&gt; a,1 b,1
Input2 -&gt; Map -&gt;     b,1
Input3 -&gt; Map -&gt; a,1     c,1
                  |   |   |
                  |   |   -&gt; Reduce -&gt; c,1
                  |   -----&gt; Reduce -&gt; b,2
                  ---------&gt; Reduce -&gt; a,2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>input is (already) split into M files</li>
<li>MR calls Map() for each input file, produces list of k,v pairs<br>â€œintermediateâ€ data<br>each Map() call is a â€œtaskâ€</li>
<li>when Maps are done,<br>MR gathers all intermediate vâ€™s for each k,<br>and passes each key + values to a Reduce call</li>
<li>final output is set of &lt;k,v&gt; pairs from Reduce()s</li>
</ol>
<p><strong>Word-count-specific code</strong></p>
<ul>
<li>Map(k, v)<pre><code>split v into words
for each word w
  emit(w, "1")
</code></pre>
</li>
<li>Reduce(k, v_list)<pre><code>emit(len(v_list))
</code></pre>
</li>
</ul>
<p><del>çœ‹äº†å¤§åŠæ‰å‘ç°<a href="cnblogs.com/fuzhe1989/p/3413457.html">ä¸­ç¿»</a> çŒ›å¥³è½æ³ª</del>  </p>
<p><del>è™½ç„¶æœ¬äººè‹±è¯­è¾ƒèœï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯åŸæ±åŸå‘³èˆ’æœ</del></p>
<p>å¯ä»¥å…³æ³¨ä¸‹paperé‡Œæé«˜æ€§èƒ½çš„ä¸€äº›trickï¼Œè¿˜æŒºæœ‰æ„æ€çš„ <span class="github-emoji"><span>ğŸ˜‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> æ¯”å¦‚ï¼š</p>
<p>ç½‘ç»œå¸¦å®½é€šå¸¸æ˜¯ç¨€ç¼ºçš„èµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥å‡å°‘ç½‘ç»œæ•°æ®çš„å‘é€ï¼Œå› æ­¤å¯ä»¥å±€éƒ¨æ€§ä¼˜åŒ–ï¼Œåœ¨æœ¬åœ°å…ˆå¤„ç†ã€åˆå¹¶ä¸­é—´æ•°æ®ï¼Œå‡å°‘ç½‘ç»œä¸Šçš„æ•°æ®ä¼ é€é‡ï¼›</p>
<p>æœ€æœ«å°¾çš„ process-in æ•°æ®å¾€å¾€æœ€å½±å“æ€»è¿›åº¦ï¼ˆstragglerï¼‰ï¼Œå› ä¸ºå¾ˆå¯èƒ½å‡ºç°äº†å½±å“è¿›åº¦çš„ bugï¼Œå› æ­¤å¯ä»¥åˆ›å»ºå¤šä¸ªå‰¯æœ¬ï¼Œå¤šè€—è´¹ä¸€äº›èµ„æºï¼Œä½†æé«˜æ•ˆç‡ã€‚</p>

        </div>
        <div class="top-div">
          <ol class="top-box"><li class="top-box-item top-box-level-2"><a class="top-box-link"><span class="top-box-text">Get started</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link"><span class="top-box-text">Overview</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link"><span class="top-box-text">Abstract view</span></a></li></ol>
        </div>
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/posts/4ce1e73.html">
          <h3 class="post-title">
            ä¸‹ä¸€ç¯‡ï¼šMIT6.824 Distributed Systems Engineering
          </h3>
        </a>
      </div>
    
  </div>




<footer>
<div class="site-footer">
  <div class="social-container">
    
      
        <a href="https://github.com/Trea19" target="_blank">
          <i class="icon icon-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <a href="https://github.com/f-dong/hexo-theme-minimalism" target="_blank">Theme</a>
  
  
  
  
  
  
</div>
</footer>


      </div>
      
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.fancybox.min.js"></script>



    <script>window.is_post = true;</script>


<script src="/js/main.js"></script>





    </div>
  </body>
</html>

